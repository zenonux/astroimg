(function(c,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("cos-js-sdk-v5"),require("element-plus")):typeof define=="function"&&define.amd?define(["exports","vue","cos-js-sdk-v5","element-plus"],e):(c=typeof globalThis<"u"?globalThis:c||self,e(c.Astroimg={},c.Vue,c.COS,c.elementPlus))})(this,function(c,e,f,s){"use strict";const u=(r,d)=>{const t=r.__vccOpts||r;for(const[l,p]of d)t[l]=p;return t},_={};function g(r,d){return e.openBlock(),e.createElementBlock("button")}const m=u(_,[["render",g]]),h=r=>(e.pushScopeId("data-v-029bddd2"),r=r(),e.popScopeId(),r),k=["src"],y=h(()=>e.createElementVNode("div",{class:"el-upload__tip"}," 支持 jpg/jpeg/png 格式，大小不超过500kb，建议使用tinypng压缩后上传 ",-1)),S=e.defineComponent({__name:"index",props:{modelValue:{},config:{}},emits:["update:modelValue"],setup(r,{emit:d}){const t=r,l=o=>t.config.domain+"/"+o,p=()=>new f({getAuthorization(o,i){t.config.getTempSecret({region:t.config.region,bucket:t.config.bucket,resource:t.config.resource}).then(n=>{i({TmpSecretId:n.data.credentials.tmpSecretId,TmpSecretKey:n.data.credentials.tmpSecretKey,SecurityToken:n.data.credentials.token,StartTime:n.data.startTime,ExpiredTime:n.data.expiredTime})})}}),x=()=>{const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i="",n=0;n<10;n++){var a=Math.floor(Math.random()*o.length);i+=o.substring(a,a+1)}return new Date().getTime()+"-"+i},T=o=>{var n;const i=(n=o.split(".").pop())==null?void 0:n.toLowerCase();return t.config.resource+"/"+x()+"."+i},B=o=>o.size/1024>500?(s.ElMessage.error("图片不能超过500kb"),!1):!0,j=o=>p().uploadFile({Bucket:t.config.bucket,Region:t.config.region,Key:T(o.file.name),Body:o.file,onFileFinish:function(i,n,a){i?s.ElMessage.error("上传失败"):d("update:modelValue",a.Key)}});return(o,i)=>(e.openBlock(),e.createBlock(e.unref(s.ElUpload),{class:"a-uploader","show-file-list":!1,"http-request":j,"before-upload":B,accept:".jpg,.jpeg,.png"},{tip:e.withCtx(()=>[y]),default:e.withCtx(()=>[t.modelValue?(e.openBlock(),e.createElementBlock("img",{key:0,src:l(t.modelValue),class:"a-uploader__cover"},null,8,k)):(e.openBlock(),e.createBlock(e.unref(s.ElIcon),{key:1,class:"a-uploader__icon"}))]),_:1}))}}),C="",b=u(S,[["__scopeId","data-v-029bddd2"]]);c.ADebounceAsyncButton=m,c.AUploader=b,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
